(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[24102],{936410:(e,t,s)=>{"use strict";s.r(t),s.d(t,{monthsFullNames:()=>l,monthsShortNames:()=>a,weekDaysFullNames:()=>o,weekDaysMiniNames:()=>u,weekDaysShortNames:()=>r});var n=s(444372),i=s(414879);const l={[i.Months.JANUARY]:n.t(null,void 0,s(100200)),[i.Months.FEBRUARY]:n.t(null,void 0,s(581069)),[i.Months.MARCH]:n.t(null,void 0,s(193878)),[i.Months.APRIL]:n.t(null,void 0,s(528896)),[i.Months.MAY]:n.t(null,void 0,s(125734)),[i.Months.JUNE]:n.t(null,void 0,s(661487)),[i.Months.JULY]:n.t(null,void 0,s(206608)),[i.Months.AUGUST]:n.t(null,void 0,s(811081)),[i.Months.SEPTEMBER]:n.t(null,void 0,s(632179)),[i.Months.OCTOBER]:n.t(null,void 0,s(137997)),[i.Months.NOVEMBER]:n.t(null,void 0,s(604607)),[i.Months.DECEMBER]:n.t(null,void 0,s(890082))},a={[i.Months.JANUARY]:n.t(null,void 0,s(562310)),[i.Months.FEBRUARY]:n.t(null,void 0,s(302507)),[i.Months.MARCH]:n.t(null,void 0,s(92767)),[i.Months.APRIL]:n.t(null,void 0,s(227072)),[i.Months.MAY]:n.t(null,{context:"short"},s(13132)),[i.Months.JUNE]:n.t(null,void 0,s(800429)),[i.Months.JULY]:n.t(null,void 0,s(853786)),[i.Months.AUGUST]:n.t(null,void 0,s(546450)),[i.Months.SEPTEMBER]:n.t(null,void 0,s(806816)),[i.Months.OCTOBER]:n.t(null,void 0,s(912179)),[i.Months.NOVEMBER]:n.t(null,void 0,s(526899)),[i.Months.DECEMBER]:n.t(null,void 0,s(532084))},o={[i.WeekDays.SUNDAY]:n.t(null,void 0,s(661480)),[i.WeekDays.MONDAY]:n.t(null,void 0,s(419573)),[i.WeekDays.TUESDAY]:n.t(null,void 0,s(682160)),[i.WeekDays.WEDNESDAY]:n.t(null,void 0,s(894226)),[i.WeekDays.THURSDAY]:n.t(null,void 0,s(879137)),[i.WeekDays.FRIDAY]:n.t(null,void 0,s(503570)),[i.WeekDays.SATURDAY]:n.t(null,void 0,s(130348))},r={[i.WeekDays.SUNDAY]:n.t(null,void 0,s(377493)),[i.WeekDays.MONDAY]:n.t(null,void 0,s(837150)),[i.WeekDays.TUESDAY]:n.t(null,void 0,s(811916)),[i.WeekDays.WEDNESDAY]:n.t(null,void 0,s(711532)),[i.WeekDays.THURSDAY]:n.t(null,void 0,s(771388)),[i.WeekDays.FRIDAY]:n.t(null,void 0,s(922928)),[i.WeekDays.SATURDAY]:n.t(null,void 0,s(232273))},u={[i.WeekDays.SUNDAY]:n.t(null,{context:"day_of_week"},s(875005)),[i.WeekDays.MONDAY]:n.t(null,{context:"day_of_week"},s(930961)),[i.WeekDays.TUESDAY]:n.t(null,{context:"day_of_week"},s(244254)),[i.WeekDays.WEDNESDAY]:n.t(null,{context:"day_of_week"},s(392578)),[i.WeekDays.THURSDAY]:n.t(null,{context:"day_of_week"},s(608765)),[i.WeekDays.FRIDAY]:n.t(null,{context:"day_of_week"},s(923230)),[i.WeekDays.SATURDAY]:n.t(null,{context:"day_of_week"},s(894748))}},766626:e=>{e.exports={wrapper:"wrapper-hPiAkrn3",timezone:"timezone-hPiAkrn3",largePadding:"largePadding-hPiAkrn3",sessionDayWrapper:"sessionDayWrapper-hPiAkrn3",nowWrapper:"nowWrapper-hPiAkrn3",now:"now-hPiAkrn3",sessionDay:"sessionDay-hPiAkrn3",weekDay:"weekDay-hPiAkrn3",sessionDaySegments:"sessionDaySegments-hPiAkrn3",timeMarkWrapper:"timeMarkWrapper-hPiAkrn3",timeMarkSegment:"timeMarkSegment-hPiAkrn3",timeMark:"timeMark-hPiAkrn3",timeMarkSegmentAlignByEnds:"timeMarkSegmentAlignByEnds-hPiAkrn3",segment:"segment-hPiAkrn3",
small:"small-hPiAkrn3",start:"start-hPiAkrn3",end:"end-hPiAkrn3",active:"active-hPiAkrn3",green:"green-hPiAkrn3",orange:"orange-hPiAkrn3",blue:"blue-hPiAkrn3",gray:"gray-hPiAkrn3",tooltip:"tooltip-hPiAkrn3",time:"time-hPiAkrn3"}},30693:(e,t,s)=>{"use strict";s.d(t,{FullSessionScheduleWidget:()=>a});var n=s(50959),i=s(463547),l=s(162162);class a{constructor(e){this._source=e,this._fullSessionScheduleViewModel=new i.FullSessionScheduleViewModel(e)}destroy(){this._fullSessionScheduleViewModel.destroy()}renderer(e,t){var s;const i=null===(s=this._source.marketStatusModel())||void 0===s?void 0:s.status().value();return"expired"===i||"delisted"===i?null:(0,n.createElement)(l.FullSessionScheduleRenderer,{key:e,className:t,showAllDays:void 0,sessionDays:this._fullSessionScheduleViewModel.sessionsDays,now:this._fullSessionScheduleViewModel.currentTimeValue(),timezone:this._fullSessionScheduleViewModel.timezone()})}updateSource(e){this._source=e,this._fullSessionScheduleViewModel.destroy(),this._fullSessionScheduleViewModel=new i.FullSessionScheduleViewModel(e)}}},162162:(e,t,s)=>{"use strict";s.d(t,{FullSessionScheduleRenderer:()=>f});var n=s(50959),i=s(497754),l=s(650151),a=s(444372),o=s(631078),r=s(79342),u=s(766626);const d=new WeakMap;function c(e){return d.has(e)||d.set(e,(0,r.randomHash)()),(0,l.ensureDefined)(d.get(e))}const h=new Map([[0,u.green],[1,u.orange],[2,u.blue],[3,u.gray]]),m=new Map([[0,a.t(null,void 0,s(241410))],[1,a.t(null,void 0,s(236018))],[2,a.t(null,void 0,s(673897))],[3,a.t(null,void 0,s(762464))]]),p=a.t(null,void 0,s(763538));function _(e){const{segment:t,forceStart:s,forceEnd:l}=e,a=t.end.value-t.start.value,o=a<.03,r={left:100*t.start.value+"%",width:`calc(${100*a}% + ${o?2:0}px)`},d=i(u.segment,h.get(t.type),(s||t.start.isFirstOrLastPoint)&&u.start,(l||t.end.isFirstOrLastPoint)&&u.end,o&&u.small,"common-tooltip-html","apply-common-tooltip"),c=function(e,t){return`<div class="${u.tooltip}">\n\t\t<span class="${h.get(t)}">${m.get(t)}</span>\n\t\t<span class="${u.time}">${e}</span>\n\t</div>`}(t.tooltip,t.type);return n.createElement("div",{className:d,style:r,"data-tooltip":c})}function v(e){const{sessionDay:t}=e,s=t.entries.map(((e,s)=>n.createElement(_,{key:`${c(e)}Segment`,segment:e,forceStart:0===s&&3===e.type,forceEnd:s===t.entries.length-1&&3===e.type}))),l=i(u.sessionDay,t.isActive&&u.active);return n.createElement("div",{className:l},n.createElement("div",{className:u.weekDay},t.title),n.createElement("div",{className:u.sessionDaySegments},s))}function y(e){const{sessionDays:t,currentTimeMark:s}=e,l=[],a=parseInt(Object.keys(t).filter((e=>t[parseInt(e)].isActive))[0]),o=t[a],r=o.entries.filter((e=>e.start.value<=s&&e.end.value>=s))[0];!r.start.isFirstOrLastPoint&&r.showStartForLastEntry?l.push(o.entries[o.entries.length-1].start):l.push(r.start);const d=!r.end.isFirstOrLastPoint&&r.showEndForFirstEntry?o.entries[0].end:r.end;if(l[0].value!==d.value&&l.push(d),0===l.length)return null;l.sort(((e,t)=>e.value-t.value));const h=l.map((e=>n.createElement("div",{key:c(e),className:u.timeMark
},e.title))),m=100*(2===l.length?l[1].value-l[0].value:0),p=i(m>12&&u.timeMarkSegmentAlignByEnds,u.timeMarkSegment);return n.createElement("div",{className:u.sessionDay},n.createElement("div",{className:u.weekDay}),n.createElement("div",{className:u.timeMarkWrapper},n.createElement("div",{className:p,style:{left:100*l[0].value+"%",width:`${m}%`}},h)))}function f(e){const{className:t,timezone:s,showAllDays:l,timeZoneClassName:a}=e,r=(0,o.useWatchedValueReadonly)({watchedValue:e.sessionDays}),d=(0,o.useWatchedValueReadonly)({watchedValue:e.now}),c=Object.values(r).filter((e=>e.isActive))[0],h=i(t,u.wrapper);return n.createElement("div",{className:h},n.createElement("div",{className:u.sessionDayWrapper},l?n.createElement(n.Fragment,null,Object.values(r).map(((e,t)=>n.createElement(v,{key:t,sessionDay:e})))):n.createElement(v,{sessionDay:c}),n.createElement("div",{className:u.nowWrapper},n.createElement("div",{className:u.now,style:{left:100*d+"%"}}))),n.createElement(y,{sessionDays:r,currentTimeMark:d}),n.createElement("div",{className:i(u.timezone,a,l&&u.largePadding)},`${p}: ${s}`))}},463547:(e,t,s)=>{"use strict";s.d(t,{FullSessionScheduleViewModel:()=>se});var n=s(430777),i=s(124829),l=s(870045),a=s(375397),o=s(975179);function r(e){return e/l.minutesPerDay}function u(e){return Math.round(e*l.minutesPerDay)}const d=function(e){return e&&e.length?e[0]:void 0};var c=s(82593),h=s(650151),m=s(387964),p=s(414879);const _=[p.WeekDays.SUNDAY,p.WeekDays.MONDAY,p.WeekDays.TUESDAY,p.WeekDays.WEDNESDAY,p.WeekDays.THURSDAY,p.WeekDays.FRIDAY,p.WeekDays.SATURDAY];function v(e,t){return(e+t+6)%7+1}function y(e){return t=>v(t,e)}const f=y(-1),k=y(1);var g=s(936410),D=s(574313);function S(e){for((0,h.assert)(Number.isInteger(e),"timeMinutes expected to be integer number");e>l.minutesPerDay;)e-=l.minutesPerDay;const t=e%60,s=(e-t)/60;return(0,D.numberToStringWithLeadingZero)(s,2)+":"+(0,D.numberToStringWithLeadingZero)(t,2)}function M(e,t){return`${e} — ${t}`}function w(e,t){return`${g.weekDaysShortNames[e]} ${S(t)}`}function E(e,t,s,n){(0,h.assert)(t!==l.minutesPerDay,"Start time expected to be normalized (24:00 as range start is not allowed)"),(0,h.assert)(0!==n,"End time expected to be normalized (00:00 as range end is not allowed)");const i=function(e,t,s,n){const i=e*l.minutesPerDay+t;let a=s*l.minutesPerDay+n;return a<i&&(a+=7*l.minutesPerDay),a-i}(e,t,s,n);return i<l.minutesPerDay||i===l.minutesPerDay&&0===t?function(e,t){return M(S(e),S(t))}(t,n):function(e,t,s,n){return M(w(e,t),w(s,n))}(e,t,s,n)}function b(e,t,s,n){return{start:e,end:t,type:s,tooltip:n,showStartForLastEntry:!1,showEndForFirstEntry:!1}}function A(e){return{value:e,title:S(u(e)),isFirstOrLastPoint:!0}}function W(e){return 3!==e.type}function N(e,t){return{dayIndex:e,entries:t.filter(W)}}function C(e,t,s,n=t){const i=s(t),l=e[i];return i!==n&&0===l.entries.length?C(e,i,s,n):N(i,e[i].entries)}function T(e){return(t,s)=>C(t,s,e)}const I=T(f),P=T(k);function V(e,t,s,n){return(i,l,a)=>void 0===i?[n,a]:i===e?[t,s(l)]:[i,l]}const B=V(1,0,k,0),x=V(0,1,f,1)
;function F(e,t,s,n,i){const[l,a]=B(e,t,i),[o,r]=x(s,n,i);(0,h.assert)(t!==s||l<o,`Days are same (${t}) but prev entry time (${l}) >= next entry time (${o})`);const d=u(l),c=u(o);return b(A(a!==i?0:l),A(r!==i?1:o),3,E(a,d,r,c))}function R(e,t,s,n,i){var l,a;return F(null===(l=null==e?void 0:e.end)||void 0===l?void 0:l.value,t,null===(a=null==s?void 0:s.start)||void 0===a?void 0:a.value,n,i)}function O(e){const t=[...e.entries];for(let s=1;s<e.entries.length;s++){const n=e.entries[s-1],i=e.entries[s];if(i.start.value!==n.end.value){const s=R(n,e.dayIndex,i,e.dayIndex,e.dayIndex);t.push(s)}}return t.sort(((e,t)=>e.start.value-t.start.value)),t}function L(e,t){const s=(0,c.default)(t.entries),n=t.dayIndex,i=(0,h.ensureDefined)(d(e.entries));return 0===i.start.value?[]:[R(s,n,i,e.dayIndex,e.dayIndex)]}function Y(e,t){const s=d(t.entries),n=t.dayIndex,i=(0,h.ensureDefined)((0,c.default)(e.entries));return 1===i.end.value?[]:[R(i,e.dayIndex,s,n,e.dayIndex)]}function z(e,t){var s,n;const l={thisDay:N(e,t[e].entries),prevDay:I(t,e),nextDay:P(t,e)};return null!==(n=null!==(s=function({thisDay:e,prevDay:t,nextDay:s}){if(0===e.entries.length)return[R((0,c.default)(t.entries),t.dayIndex,d(s.entries),s.dayIndex,e.dayIndex)]}(l))&&void 0!==s?s:function({thisDay:e,prevDay:t,nextDay:s}){const n=e.dayIndex;if(t.dayIndex!==n||s.dayIndex!==n)return;const l=e.entries,a=(0,h.ensureDefined)(d(l)),o=(0,h.ensureDefined)((0,c.default)(l));return[0!==a.start.value?F(0,n,a.start.value,n,n):void 0,...O(e),1!==o.end.value?F(o.end.value,n,1,n,n):void 0].filter(i.isExistent)}(l))&&void 0!==n?n:function(e){return[...L(e.thisDay,e.prevDay),...O(e.thisDay),...Y(e.thisDay,e.nextDay)]}(l)}function U(e,t,s,n){const[i,l]=e[t],a=r(i),o=r(l);return b(A(a),A(o),s,n)}function H(e,t,s,n){let i=e;const a=t+s;let o;if(a<=l.minutesPerDay)o=[[t,a]];else{const e=Math.min(l.minutesPerDay-t,s);o=[[t,t+e],[0,s-e]]}const u=function(e,t){const s=(0,h.ensureDefined)(d(e))[0],n=(0,h.ensureDefined)((0,c.default)(e))[1],i=e.map((e=>e[1]-e[0])).reduce(((e,t)=>e+t));return E(t,s,n===l.minutesPerDay?t:v(t,Math.floor(r(s+i))),n)}(o,i),m=[];for(let e=0;e<o.length;e++){const t=U(o,e,n,u);m.push([t,i]),i=k(i)}return m}var $=s(814771);const J=function(e){for(var t=-1,s=null==e?0:e.length,n={};++t<s;){var i=e[t];n[i[0]]=i[1]}return n}(_.map((e=>[e,{title:g.weekDaysShortNames[e],isActive:!1,entries:[]}])));function j(e){return(t,s)=>{return n=(0,h.ensureDefined)(e(t)),i=(0,h.ensureDefined)(e(s)),n.start.value===i.start.value&&n.end.value===i.end.value;var n,i}}const Z=j(d),G=j(c.default);function q(e,t){return H(e.sessionStartDayOfWeek(),e.start(),e.length(),t)}function K(e,t){t.forEach((t=>function(e,t,s){const n=e[s].entries;n.push(t),n.sort(((e,t)=>e.start.value-t.start.value))}(e,t[0],t[1])))}function Q(e,t,s){for(const n of t){K(e,q(n,s))}}function X(e,t){return e.type===t.type&&(3===e.type||t.end.value-t.start.value+e.end.value-e.start.value<=1)}function ee(e,t){var s;const n=(null!==(s=null==t?void 0:t.getUTCDay())&&void 0!==s?s:(new Date).getDay())%7+1;const i=function(e){
if(null===e)return new Map;if(void 0===e.subsessions)return new Map([[0,new $.SessionSpec(e.timezone,e.session,e.session_holidays,e.corrections)]]);const t="regular",s="premarket",n="postmarket",i=[t,s,n],l=new Map;for(const a of i){let i=null;switch(a){case t:i=0;break;case s:i=1;break;case n:i=2}if(null!==i){const t=e.subsessions.find((e=>e.id===a));void 0!==t&&l.set(i,new $.SessionSpec(e.timezone,t["session-display"]||t.session,e.session_holidays,t["session-correction"]))}}return l}(e),l=(0,m.deepCopy)(J);l[n].isActive=!0;for(const e of Array.from(i.keys())){Q(l,(0,h.ensureDefined)(i.get(e)).getEntriesForWeekByCalendar((0,h.ensureNotNull)(t)),e)}return function(e){const t=new Map;for(const s of _)t.set(s,z(s,e));for(const s of _)e[s].entries=(0,h.ensureDefined)(t.get(s))}(l),function(e){for(const t of _){const s=e[t].entries,n=(0,h.ensureDefined)(d(s));X(n,(0,h.ensureDefined)((0,c.default)(e[f(t)].entries)))&&(n.start.isFirstOrLastPoint=!1);const i=(0,h.ensureDefined)((0,c.default)(s));X(i,(0,h.ensureDefined)(d(e[k(t)].entries)))&&(i.end.isFirstOrLastPoint=!1)}}(l),function(e){for(const t of _){const s=e[t].entries;if(1===s.length)continue;const n=f(t),i=k(t),l=(0,h.ensureDefined)((0,c.default)(s)),a=(0,h.ensureDefined)(d(s));a.start.isFirstOrLastPoint||(a.showStartForLastEntry=G(s,e[n].entries)),l.end.isFirstOrLastPoint||(l.showEndForFirstEntry=Z(s,e[i].entries))}}(l),{newSessionsDays:l,newTodaySession:l[n]}}function te(e){return l.get_cal_from_unix_timestamp_ms(l.get_timezone(e.timezone),window.ChartApiInstance.serverTime()-1e3*(0,o.getSymbolDelaySeconds)(e))}class se{constructor(e){this.sessionsDays=new a.WatchedValue((0,i.clone)(J)),this.todaySession=new a.WatchedValue((0,i.clone)({entries:[]})),this._currentTime=new a.WatchedValue(-1),this._symbolInfo=e.symbolInfo().spawn(),this._symbolInfo.subscribe(this._updateEntriesBySubSessions.bind(this),{callWithLast:!0}),this._timeIntervalId=setInterval(this._updateTodayWithOffsets.bind(this),6e4)}destroy(){this._symbolInfo.destroy(),clearInterval(this._timeIntervalId)}currentTimeValue(){return this._currentTime.readonly()}timezone(){const e=this._symbolInfo.value();return null===e?"":(0,n.timezoneTitle)(e.timezone)}_updateEntriesBySubSessions(e){this._updateTodayWithOffsets();const{newSessionsDays:t,newTodaySession:s}=ee(e,null===e?null:te(e));this.sessionsDays.setValue(t),this.todaySession.setValue(s)}_updateTodayWithOffsets(){const e=this._symbolInfo.value();if(null===e)return void this._currentTime.setValue(-1);const t=this._currentTime.value(),s=r(l.get_minutes_from_midnight(te(e)));this._currentTime.setValue(s),s<t&&this._updateEntriesBySubSessions(e)}}},625411:(e,t,s)=>{"use strict";s.d(t,{StatusRenderer:()=>a});var n=s(858994);class i{constructor(e){this._el=document.createElement("div"),this._prevCustomClass=null,this._prevCustomColor=null,this._customColor=null,this._size=e.size||"small",this._icon=e.icon.spawn(),this._className=e.className.spawn(),this._visible=e.visible.spawn(),this._el.classList.add(n.statusItem,n[this._size]),
e.datasetName&&(this._el.dataset.name=e.datasetName),e.datasetEntityId&&(this._entityId=e.datasetEntityId.spawn(),this._entityId.subscribe((e=>{this._el.dataset.entityId=e}),{callWithLast:!0})),this._icon.subscribe(this._updateIcon.bind(this),{callWithLast:!0}),this._className.subscribe(this._updateClassName.bind(this),{callWithLast:!0}),e.isBlinking&&(this._isBlinking=e.isBlinking.spawn(),this._isBlinking.subscribe(this._updateBlinkingMode.bind(this),{callWithLast:!0}),this._turnOffBlinking=e.turnOffBlinking)}destroy(){var e;null===(e=this._entityId)||void 0===e||e.destroy(),this._visible.destroy(),this._icon.destroy(),this._isBlinking&&this._isBlinking.destroy()}onClick(){this._turnOffBlinking&&this._turnOffBlinking()}visible(){return this._visible}element(){return this._el}_updateIcon(e){this._el.innerHTML=e||""}_updateClassName(e){this._prevCustomClass!==e&&(null!==this._prevCustomClass&&this._el.classList.remove(this._prevCustomClass),null!==e&&this._el.classList.add(e),this._prevCustomClass=e)}_updateCustomColor(e){0}_updateBlinkingMode(e){this._el.classList.toggle(n.blinking,e)}}function l(e,t,s){for(const n of t)for(const t of n.split(" "))e.classList.toggle(t,s)}class a{constructor(e,t,s,i=n){this.element=document.createElement("div"),this._blinkingSpawns=[],this._iconsRenderers=[],this._updateIcons=()=>{const[e,t]=this._iconsRenderers.reduce(((e,t)=>{const s=t.element();return t.visible().value()&&e[0].length<3?e[0].push(s):e[1].push(s),e}),[[],[]]);t.forEach((e=>{this.element.contains(e)&&this.element.removeChild(e)})),e.forEach(((e,t)=>{this.element.contains(e)||(t>=this.element.childElementCount?this.element.appendChild(e):this.element.insertBefore(e,this.element.childNodes[t]))}))},this._theme=i;const a=[this._theme.statuses,"apply-common-tooltip","common-tooltip-wide",this._theme[e],this._theme.statuses_hidden];l(this.element,a,!0),this._tooltips=t.spawn(),this._tooltips.subscribe(this._updateTooltip.bind(this)),this._onClickCallback=s.onClick,this._onClickHandler=this._onClick.bind(this),this.element.addEventListener("click",this._onClickHandler),this.element.dataset.name="legend-source-item-status"}destroy(){for(const e of this._iconsRenderers)e.destroy();for(const e of this._blinkingSpawns)e.destroy();this._tooltips.destroy(),this.element.removeEventListener("click",this._onClickHandler),this.element.remove()}setVisibility(e){l(this.element,[this._theme.statuses_hidden],e)}addStatusModel(e){const t=new i({visible:e.visible,icon:e.model.icon(),className:e.model.className(),size:e.model.size(),isBlinking:e.model.isBlinkingMode,turnOffBlinking:e.model.turnOffBlinkingMode,customColor:e.model.customColor(),datasetName:e.iconDatasetName,datasetEntityId:e.iconDatasetEntityId});this._iconsRenderers.push(t);const s=e.model.isBlinkingMode.spawn();s.subscribe(this._updateBlinkingMode.bind(this)),t.visible().subscribe(this._updateIcons,{callWithLast:!0}),this._blinkingSpawns.push(s),this._updateBlinkingMode()}_onClick(e){e.preventDefault();const t=this._iconsRenderers.filter((e=>e.visible().value()))
;for(const e of t)e.onClick();let s=14;t.length>1&&(s-=2);const n=this.element.getBoundingClientRect(),i={x:n.left-s,y:n.bottom+4};this._onClickCallback(i)}_updateTooltip(){this.element.setAttribute("title",this._tooltips.value().join(" · "))}_updateBlinkingMode(){const e=this._blinkingSpawns.some((e=>e.value()));l(this.element,[this._theme.blinking],e)}}},331920:(e,t,s)=>{"use strict";s.d(t,{MarketStatusViewModel:()=>r});var n=s(433524),i=s(375397),l=s(875678),a=s(1847),o=s(807975);class r extends a.StatusViewModel{constructor(e,t,s=!1){super({tooltipMap:o.tooltipMap,iconMap:o.iconMap,classNameMap:o.classNameMap,titleMap:o.titleMap,titleColorMap:o.titleColorMap,actionMap:o.actionMap,size:t}),this._model=null,this._expiredStatus=null,this._marketStatus=new i.WatchedValue(null).spawn(),this._sessionEdge=new i.WatchedValue(null).spawn(),this._ignoreHideStatusSettings=s,this.setModel(e),l.showMarketOpenStatusProperty.subscribe(this,this._showMarketOpenStatusPropertyChanged)}destroy(){this._marketStatus.destroy(),this._sessionEdge.destroy(),this._model=null,l.showMarketOpenStatusProperty.unsubscribeAll(this),super.destroy()}setModel(e){var t;if(this._marketStatus.destroy(),this._sessionEdge.destroy(),null===(t=this._expiredStatus)||void 0===t||t.destroy(),null===e)return this._marketStatus=new i.WatchedValue(null).spawn(),this._sessionEdge=new i.WatchedValue(null).spawn(),void(this._expiredStatus=null);this._model=e;const s=e.futuresContractExpirationTime();s&&(this._expiredStatus=s.expired().spawn(),this._expiredStatus.subscribe((e=>{e&&this._updateByStatus(this._marketStatus.value())}))),this._marketStatus=e.status().spawn(),this._marketStatus.subscribe(this._updateStatus.bind(this),{callWithLast:!0}),this._sessionEdge=e.nextSessionEdge().spawn(),this._sessionEdge.subscribe(this._updateTooltip.bind(this)),this._updateTooltip()}async _updateFullTooltip(){const e=this.status().value();if(null===e)return void this._fullTooltip.setValue(null);const t=[],s=o.marketStatusDescription.get(e);s&&t.push((0,n.htmlEscape)(s));const i=this._marketStatus.value();if(null!==this._model&&null!==i&&"expired"!==i&&"delisted"!==i){const s=this._model.nextSessionEdge().value();null!==s&&t.push({text:o.countdownFnMap[e](s),bold:!0})}this._fullTooltip.setValue([{icon:this._getIcon(e),iconClassName:this._getFullTooltipIconClassNames(e),title:this._getTitle(e),titleColor:this._getTitleColor(e),html:t,size:this._size,action:this._getAction(e)}])}_shouldBeHiddenByStatus(e){return!this._ignoreHideStatusSettings&&!l.showMarketOpenStatusProperty.value()&&"market"===e}_updateStatus(e){this._status.setValue(e)}_updateTooltip(){this._updateFullTooltip()}_showMarketOpenStatusPropertyChanged(){this._updateByStatus(this._status.value())}}},1847:(e,t,s)=>{"use strict";s.d(t,{StatusViewModel:()=>a});var n=s(375397),i=s(433524),l=s(858994);class a{constructor(e){this.isBlinkingMode=new n.WatchedValue(!1),this._status=new n.WatchedValue(null),this._fullTooltip=new n.WatchedValue(null),this._iconClassNames=new n.WatchedValue(null),
this._visible=new n.WatchedValue(!1),this._destroyed=!1,this._tooltip=new n.WatchedValue(null),this._icon=new n.WatchedValue(null),this._className=new n.WatchedValue(null),this._customColor=new n.WatchedValue(null),this._infoMaps=e,this._size=e.size||"small",this._status.subscribe(this._updateByStatus.bind(this),{callWithLast:!0})}destroy(){this._destroyed=!0}turnOffBlinkingMode(){}status(){return this._status}tooltip(){return this._tooltip}icon(){return this._icon}className(){return this._className}visible(){return this._visible}size(){return this._size}fullInfo(){return this._fullTooltip}customColor(){return this._customColor}_getTooltip(e){var t,s;return null!==(s=null===(t=this._infoMaps.tooltipMap)||void 0===t?void 0:t.get(e))&&void 0!==s?s:null}_getIcon(e){let t;const s=this._infoMaps.iconMap.get(e);return void 0!==s&&(t=s.get(this._size)),t||null}_getClassName(e){return this._infoMaps.classNameMap.get(e)||null}_getFullTooltipIconClassNames(e){const t=this._getClassName(e);return t?[l.statusItem,t]:[]}_getTitle(e){var t,s;return null!==(s=null===(t=this._infoMaps.titleMap)||void 0===t?void 0:t.get(e))&&void 0!==s?s:null}_getTitleColor(e){var t,s;return null!==(s=null===(t=this._infoMaps.titleColorMap)||void 0===t?void 0:t.get(e))&&void 0!==s?s:null}_getAction(e){var t,s;return null!==(s=null===(t=this._infoMaps.actionMap)||void 0===t?void 0:t.get(e))&&void 0!==s?s:null}_getHTML(e){var t,s,n;return null!==(n=null===(s=null===(t=this._infoMaps.htmlMap)||void 0===t?void 0:t.get(e))||void 0===s?void 0:s.map(i.htmlEscape))&&void 0!==n?n:[]}async _updateFullTooltip(){const e=this._status.value();null!==e?this._fullTooltip.setValue([{icon:this._getIcon(e),iconClassName:this._getFullTooltipIconClassNames(e),title:this._getTitle(e),titleColor:this._getTitleColor(e),html:this._getHTML(e),size:this._size,action:this._getAction(e)}]):this._fullTooltip.setValue(null)}_updateByStatus(e){if(null===e||this._shouldBeHiddenByStatus(e))return this._icon.setValue(null),this._tooltip.setValue(null),void this._visible.setValue(!1);this._icon.setValue(this._getIcon(e)),this._className.setValue(this._getClassName(e)),this._tooltip.setValue(this._getTooltip(e)),this._visible.setValue(!0),this._updateFullTooltip()}_shouldBeHiddenByStatus(e){return!1}}}}]);